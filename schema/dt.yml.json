{
	"$schema": "https://json-schema.org/draft/2019-09/schema#",
	"$id": "https://cpuabuse.com/dt/schema/dt.yml.json",
	"title": "Dungeon Together schema",
	"description": "A schema for generation of Dungeon Together shards",
	"type": "object",
	"required": ["data", "kinds"],
	"additionalProperties": false,
	"definitions": {
		"data": {
			"description": "Data to generate",
			"type": "object",
			"required": ["shards"],
			"additionalProperties": false,
			"properties": {
				"shards": {
					"description": "Array of shards",
					"type": "array",
					"items": { "$ref": "#/definitions/shard" }
				}
			}
		},
		"kinds": {
			"description": "Entity kinds",
			"type": "object",
			"additionalProperties": {
				"$ref": "#/definitions/kind"
			}
		},
		"kind": {
			"description": "Entity kinds",
			"type": "object",
			"required": ["name", "module"],
			"additionalProperties": false,
			"properties": {
				"name": {
					"description": "Internal module kind ID",
					"type": "string"
				},
				"module": {
					"description": "Module name",
					"type": "string"
				}
			}
		},
		"shard": {
			"description": "Shard to generate",
			"type": "object",
			"required": ["grids"],
			"additionalProperties": false,
			"properties": {
				"id": { "$ref": "#/definitions/id", "description": "ID path" },
				"grids": {
					"description": "Array of grids",
					"type": ["array", "null"],
					"items": { "$ref": "#/definitions/grid" }
				}
			}
		},
		"grid": {
			"description": "Grid to generate",
			"type": "object",
			"required": ["cells", "worlds", "x", "y", "z"],
			"additionalProperties": false,
			"properties": {
				"id": { "$ref": "#/definitions/id", "description": "ID path" },
				"cells": {
					"description": "Array of cells",
					"type": "array",
					"items": { "$ref": "#/definitions/cell" }
				},
				"worlds": {
					"description": "Array of worlds",
					"type": "array",
					"items": { "$ref": "#/definitions/id" }
				},
				"x": { "description": "Cells in X-axis", "type": "number" },
				"y": { "description": "Cells in Y-axis", "type": "number" },
				"z": { "description": "Cells in Z-axis", "type": "number" }
			}
		},
		"cell": {
			"description": "Cell to generate",
			"type": "object",
			"required": ["entities", "x", "y", "z"],
			"additionalProperties": false,
			"properties": {
				"id": { "$ref": "#/definitions/id", "description": "ID path" },
				"entities": {
					"description": "Array of entities",
					"type": "array",
					"items": { "$ref": "#/definitions/entity" }
				},
				"x": { "description": "X coordinate", "type": "number" },
				"y": { "description": "Y coordinate", "type": "number" },
				"z": { "description": "Z coordinate", "type": "number" }
			}
		},
		"entity": {
			"description": "Entity to generate",
			"type": "object",
			"required": ["kind"],
			"additionalProperties": false,
			"properties": {
				"id": { "$ref": "#/definitions/id", "description": "ID path" },
				"kind": { "$ref": "#/definitions/id", "description": "Kind path" },
				"mode": { "$ref": "#/definitions/id", "description": "Mode path" },
				"world": { "$ref": "#/definitions/id", "description": "World path" }
			}
		},
		"id": {
			"description": "URI path pattern",
			"type": "string",
			"pattern": "^[/a-zA-Z0-9][/a-zA-Z0-9-]+$"
		}
	},
	"properties": {
		"data": { "$ref": "#/definitions/data" },
		"kinds": { "$ref": "#/definitions/kinds" }
	}
}
